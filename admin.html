<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å | You –ü–µ—á–∫–∞</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style> 
        body { font-family: 'Inter', sans-serif; background-color: #f5f5f4; } 
        /* –ü—Ä—è—á–µ–º —Å–∫—Ä–æ–ª–ª–±–∞—Ä –¥–ª—è –∞–∫–∫—É—Ä–∞—Ç–Ω–æ—Å—Ç–∏ */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #d6d3d1; border-radius: 10px; }
    </style>
</head>
<body class="text-stone-800 antialiased h-screen w-full overflow-hidden">

    <!-- –≠–ö–†–ê–ù –í–•–û–î–ê –í –ê–î–ú–ò–ù–ö–£ -->
    <div id="login-view" class="fixed inset-0 z-[100] flex items-center justify-center bg-stone-100 p-4">
        <div class="bg-white p-8 rounded-3xl shadow-xl max-w-sm w-full border border-stone-200 text-center">
            <img src="logo.jpg" onerror="this.src='https://placehold.co/100x100/C68663/FFF?text=YP'" class="w-24 h-24 rounded-full mx-auto mb-4 border-4 border-stone-50 object-cover shadow-sm">
            <h2 class="text-2xl font-black text-stone-900 uppercase tracking-widest mb-1">You –ü–µ—á–∫–∞</h2>
            <p class="text-stone-500 mb-8 text-sm font-medium">–í—Ö–æ–¥ –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</p>
            
            <form onsubmit="login(event)" class="space-y-4">
                <div>
                    <input type="password" id="password-input" required placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" class="w-full px-4 py-3 rounded-xl border border-stone-200 focus:ring-2 focus:ring-orange-500 outline-none text-center tracking-widest font-mono transition-shadow">
                    <p id="login-error" class="text-red-500 text-xs mt-2 hidden font-medium">–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!</p>
                </div>
                <button type="submit" class="w-full bg-orange-600 hover:bg-orange-500 text-white font-bold py-3 rounded-xl transition-colors shadow-md">
                    –í–æ–π—Ç–∏
                </button>
            </form>
        </div>
    </div>

    <!-- –û–°–ù–û–í–ù–ê–Ø –ê–î–ú–ò–ù-–ü–ê–ù–ï–õ–¨ (–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–µ—Ç–∫–∞) -->
    <div id="dashboard-view" class="w-full h-full hidden flex-col md:flex-row">
        
        <!-- –ù–ê–í–ò–ì–ê–¶–ò–Ø: –°–ª–µ–≤–∞ (–î–µ—Å–∫—Ç–æ–ø) / –°–≤–µ—Ä—Ö—É (–ú–æ–±–∞–π–ª) -->
        <aside class="bg-stone-900 text-white flex flex-col md:w-64 flex-shrink-0 z-20 shadow-md">
            
            <!-- –õ–æ–≥–æ—Ç–∏–ø -->
            <div class="p-4 md:p-6 border-b border-stone-800 flex items-center justify-between md:justify-start space-x-3">
                <div class="flex items-center space-x-3">
                    <img src="logo.jpg" onerror="this.src='https://placehold.co/100x100/C68663/FFF?text=YP'" class="w-10 h-10 rounded-full object-cover border border-stone-700">
                    <div>
                        <h1 class="text-base font-black uppercase tracking-widest text-orange-500 leading-none">You –ü–µ—á–∫–∞</h1>
                        <span class="text-[10px] text-stone-400 font-medium">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</span>
                    </div>
                </div>
                <!-- –ö–Ω–æ–ø–∫–∞ –í–´–•–û–î —Ç–æ–ª—å–∫–æ –¥–ª—è –º–æ–±–∏–ª–∫–∏ (–≤ —à–∞–ø–∫–µ) -->
                <button onclick="logout()" class="md:hidden p-2 text-stone-400 hover:text-white rounded-lg">
                    <i data-lucide="log-out" class="w-5 h-5"></i>
                </button>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∏ -->
            <nav class="flex md:flex-col overflow-x-auto md:overflow-visible p-2 md:p-4 gap-2 flex-grow">
                <button onclick="switchTab('orders')" id="tab-orders" class="whitespace-nowrap flex-1 md:flex-none flex items-center px-4 py-3 bg-orange-600 rounded-xl font-medium text-white transition-colors">
                    <i data-lucide="bell" class="w-5 h-5 mr-2 md:mr-3"></i> 
                    <span class="hidden md:inline">–ó–∞–∫–∞–∑—ã</span>
                    <span class="md:hidden">–ó–∞–∫–∞–∑—ã</span>
                    <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –±–µ–π–¥–∂ –∑–∞–∫–∞–∑–æ–≤ -->
                    <span id="orders-badge" class="hidden ml-2 md:ml-auto bg-white text-orange-600 text-xs font-bold px-2 py-0.5 rounded-full">0</span>
                </button>
                <button onclick="switchTab('menu')" id="tab-menu" class="whitespace-nowrap flex-1 md:flex-none flex items-center px-4 py-3 text-stone-400 hover:bg-stone-800 hover:text-white rounded-xl font-medium transition-colors">
                    <i data-lucide="pizza" class="w-5 h-5 mr-2 md:mr-3"></i> 
                    –ú–µ–Ω—é
                </button>
                <button onclick="switchTab('settings')" id="tab-settings" class="whitespace-nowrap flex-1 md:flex-none flex items-center px-4 py-3 text-stone-400 hover:bg-stone-800 hover:text-white rounded-xl font-medium transition-colors">
                    <i data-lucide="settings" class="w-5 h-5 mr-2 md:mr-3"></i> 
                    –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                </button>
            </nav>

            <!-- –ö–Ω–æ–ø–∫–∏ –≤–Ω–∏–∑—É (—Ç–æ–ª—å–∫–æ –¥–ª—è –î–µ—Å–∫—Ç–æ–ø–∞) -->
            <div class="hidden md:block p-4 border-t border-stone-800 space-y-2 mt-auto">
                <a href="index.html" target="_blank" class="w-full flex items-center justify-center px-4 py-3 bg-stone-800 hover:bg-stone-700 rounded-xl transition-colors text-sm font-medium">
                    <i data-lucide="external-link" class="w-4 h-4 mr-2"></i> –û—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç
                </a>
                <button onclick="logout()" class="w-full flex items-center justify-center px-4 py-3 text-stone-400 hover:text-red-400 hover:bg-red-400/10 rounded-xl transition-colors text-sm font-medium">
                    <i data-lucide="log-out" class="w-4 h-4 mr-2"></i> –í—ã–π—Ç–∏
                </button>
            </div>
        </aside>

        <!-- –ö–û–ù–¢–ï–ù–¢–ù–ê–Ø –ß–ê–°–¢–¨ -->
        <main class="flex-grow overflow-y-auto p-4 md:p-8 relative">
            
            <!-- –í–∫–ª–∞–¥–∫–∞: –ó–ê–ö–ê–ó–´ -->
            <div id="view-orders" class="max-w-6xl mx-auto block">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl md:text-3xl font-bold">–¢–µ–∫—É—â–∏–µ –∑–∞–∫–∞–∑—ã</h2>
                    <button onclick="renderOrders()" class="text-stone-500 hover:text-stone-900 flex items-center bg-white px-3 py-2 md:px-4 rounded-xl shadow-sm border border-stone-200 transition-colors text-sm">
                        <i data-lucide="refresh-cw" class="w-4 h-4 mr-0 md:mr-2"></i> <span class="hidden md:inline">–û–±–Ω–æ–≤–∏—Ç—å</span>
                    </button>
                </div>

                <!-- –°–µ—Ç–∫–∞ –∑–∞–∫–∞–∑–æ–≤ -->
                <div id="orders-container" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                    <!-- –ó–∞–∫–∞–∑—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞: –ú–ï–ù–Æ -->
            <div id="view-menu" class="max-w-6xl mx-auto hidden">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
                    <h2 class="text-2xl md:text-3xl font-bold">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–µ–Ω—é</h2>
                    <button onclick="openForm()" class="w-full md:w-auto bg-orange-600 hover:bg-orange-500 text-white px-5 py-3 md:py-2.5 rounded-xl font-medium flex justify-center items-center shadow-sm transition-colors">
                        <i data-lucide="plus" class="w-5 h-5 mr-2"></i> –î–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é
                    </button>
                </div>

                <!-- –¢–∞–±–ª–∏—Ü–∞ –º–µ–Ω—é —Å –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–º —Å–∫—Ä–æ–ª–ª–æ–º –Ω–∞ –º–æ–±–∏–ª–∫–∞—Ö -->
                <div class="bg-white rounded-2xl shadow-sm border border-stone-200 overflow-x-auto">
                    <table class="w-full text-left border-collapse min-w-[600px]">
                        <thead>
                            <tr class="bg-stone-50 border-b border-stone-200 text-stone-500 text-xs md:text-sm uppercase tracking-wider">
                                <th class="p-4 w-16">–§–æ—Ç–æ</th>
                                <th class="p-4">–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                <th class="p-4">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                                <th class="p-4">–¶–µ–Ω–∞</th>
                                <th class="p-4 text-right">–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="menu-table" class="divide-y divide-stone-100">
                            <!-- –î–∞–Ω–Ω—ã–µ –º–µ–Ω—é –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞: –ù–ê–°–¢–†–û–ô–ö–ò -->
            <div id="view-settings" class="max-w-3xl mx-auto hidden">
                <h2 class="text-2xl md:text-3xl font-bold mb-6">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram –ë–æ—Ç–∞</h2>
                
                <div class="bg-white p-6 md:p-8 rounded-2xl shadow-sm border border-stone-200 mb-6">
                    <div class="flex flex-col md:flex-row items-start md:items-center mb-6 pb-6 border-b border-stone-100 gap-4">
                        <div class="w-12 h-12 bg-blue-100 text-blue-500 rounded-xl flex items-center justify-center flex-shrink-0">
                            <i data-lucide="bot" class="w-6 h-6"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold mb-1">–ö—É–¥–∞ –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –∑–∞–∫–∞–∑—ã?</h3>
                            <p class="text-stone-500 text-sm">–ß—Ç–æ–±—ã –∑–∞–∫–∞–∑—ã —Å —Å–∞–π—Ç–∞ –ø–∞–¥–∞–ª–∏ –≤–∞–º –≤ Telegram, —Å–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ <a href="https://t.me/BotFather" target="_blank" class="text-blue-500 underline">@BotFather</a> –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –µ–≥–æ –¥–∞–Ω–Ω—ã–µ —Å—é–¥–∞.</p>
                        </div>
                    </div>

                    <form onsubmit="saveSettings(event)" class="space-y-6">
                        <div>
                            <label class="block font-medium text-stone-700 mb-2 text-sm">Bot Token (API –ö–ª—é—á)</label>
                            <input type="text" id="bot-token" class="w-full px-4 py-3 border border-stone-200 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none font-mono text-sm" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 123456789:ABCdefGHIjklMNOpqrs...">
                        </div>
                        <div>
                            <label class="block font-medium text-stone-700 mb-2 text-sm">Chat ID (–í–∞—à ID –∏–ª–∏ ID –≥—Ä—É–ø–ø—ã)</label>
                            <input type="text" id="chat-id" class="w-full px-4 py-3 border border-stone-200 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none font-mono text-sm" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 987654321">
                            <p class="text-xs text-stone-400 mt-2">–£–∑–Ω–∞—Ç—å —Å–≤–æ–π Chat ID –º–æ–∂–Ω–æ —É –±–æ—Ç–∞ <a href="https://t.me/getmyid_bot" target="_blank" class="text-blue-500 hover:underline">@getmyid_bot</a>.</p>
                        </div>
                        <button type="submit" class="w-full md:w-auto bg-stone-900 hover:bg-stone-800 text-white font-bold px-6 py-3 rounded-xl shadow flex justify-center items-center transition-colors">
                            <i data-lucide="save" class="w-5 h-5 mr-2"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                        </button>
                    </form>
                </div>
            </div>

            <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –î–û–ë–ê–í–õ–ï–ù–ò–Ø / –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–Ø -->
            <div id="form-modal" class="fixed inset-0 z-50 bg-stone-900/60 backdrop-blur-sm hidden flex items-center justify-center p-4">
                <div class="bg-white rounded-3xl w-full max-w-lg shadow-2xl flex flex-col max-h-[90vh]">
                    <div class="p-5 border-b border-stone-100 flex justify-between items-center bg-stone-50 rounded-t-3xl">
                        <h3 id="modal-title" class="text-xl font-bold">–î–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é</h3>
                        <button onclick="closeForm()" class="text-stone-400 hover:text-stone-700 transition-colors p-1"><i data-lucide="x" class="w-6 h-6"></i></button>
                    </div>
                    <form id="item-form" onsubmit="saveItem(event)" class="p-5 space-y-4 overflow-y-auto">
                        <input type="hidden" id="item-id">
                        <div>
                            <label class="block text-sm font-medium mb-1 text-stone-600">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                            <input required type="text" id="item-name" class="w-full px-4 py-2 border border-stone-200 rounded-xl outline-none focus:ring-2 focus:ring-orange-500 transition-shadow">
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium mb-1 text-stone-600">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                                <select id="item-category" class="w-full px-4 py-2 border border-stone-200 rounded-xl outline-none bg-white focus:ring-2 focus:ring-orange-500">
                                    <option>–ü–æ–ø—É–ª—è—Ä–Ω–æ–µ</option>
                                    <option>–ü–∏—Ü—Ü–∞</option>
                                    <option>–î–æ–ø–æ–ª–Ω–∏ –ø–∏—Ü—Ü—É</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-1 text-stone-600">–¶–µ–Ω–∞ (‚ÇΩ)</label>
                                <input required type="number" id="item-price" class="w-full px-4 py-2 border border-stone-200 rounded-xl outline-none focus:ring-2 focus:ring-orange-500 transition-shadow">
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium mb-1 text-stone-600">–†–∞–∑–º–µ—Ä</label>
                                <input type="text" id="item-size" placeholder="30 —Å–º" class="w-full px-4 py-2 border border-stone-200 rounded-xl outline-none focus:ring-2 focus:ring-orange-500 transition-shadow">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-1 text-stone-600">–¢–µ–≥–∏ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)</label>
                                <input type="text" id="item-tags" placeholder="üî•, –û—Å—Ç—Ä–∞—è" class="w-full px-4 py-2 border border-stone-200 rounded-xl outline-none focus:ring-2 focus:ring-orange-500 transition-shadow">
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-1 text-stone-600">–û–ø–∏—Å–∞–Ω–∏–µ (—Å–æ—Å—Ç–∞–≤)</label>
                            <textarea id="item-desc" rows="2" class="w-full px-4 py-2 border border-stone-200 rounded-xl outline-none resize-none focus:ring-2 focus:ring-orange-500 transition-shadow"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-1 text-stone-600">–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–æ—Ç–æ</label>
                            <input type="url" id="item-img" class="w-full px-4 py-2 border border-stone-200 rounded-xl outline-none focus:ring-2 focus:ring-orange-500 transition-shadow" placeholder="https://...">
                        </div>
                        <div class="flex flex-col-reverse md:flex-row justify-end pt-4 border-t border-stone-100 gap-3 mt-6">
                            <button type="button" onclick="closeForm()" class="px-5 py-3 md:py-2.5 text-stone-600 bg-stone-100 hover:bg-stone-200 rounded-xl transition-colors font-medium">–û—Ç–º–µ–Ω–∞</button>
                            <button type="submit" class="px-5 py-3 md:py-2.5 text-white bg-orange-600 hover:bg-orange-500 rounded-xl font-medium transition-colors">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        </div>
                    </form>
                </div>
            </div>
        </main>
    </div>

    <script>
        // --- AUTH LOGIC (–°–ò–°–¢–ï–ú–ê –í–•–û–î–ê) ---
        const ADMIN_PASSWORD = "admin"; // –ü–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –∞–¥–º–∏–Ω–∫—É

        function checkAuth() {
            const isAuth = sessionStorage.getItem('youpechka_auth') === 'true';
            document.getElementById('login-view').classList.toggle('hidden', isAuth);
            document.getElementById('dashboard-view').classList.toggle('hidden', !isAuth);
            document.getElementById('dashboard-view').style.display = isAuth ? 'flex' : 'none';
            return isAuth;
        }

        function login(e) {
            e.preventDefault();
            const pwd = document.getElementById('password-input').value;
            if (pwd === ADMIN_PASSWORD) {
                sessionStorage.setItem('youpechka_auth', 'true');
                document.getElementById('password-input').value = '';
                document.getElementById('login-error').classList.add('hidden');
                initAdmin();
            } else {
                document.getElementById('login-error').classList.remove('hidden');
            }
        }

        function logout() {
            sessionStorage.removeItem('youpechka_auth');
            checkAuth();
        }


        // --- –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –î–ê–ù–ù–´–• (LOCALSTORAGE) ---
        let mockOrders = [];
        let menuItems = [];

        function loadData() {
            mockOrders = JSON.parse(localStorage.getItem('youpechka_orders')) || [];
            menuItems = JSON.parse(localStorage.getItem('youpechka_menu')) || [];
            
            const settings = JSON.parse(localStorage.getItem('youpechka_settings')) || {};
            if(settings.botToken) document.getElementById('bot-token').value = settings.botToken;
            if(settings.chatId) document.getElementById('chat-id').value = settings.chatId;
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –µ—Å–ª–∏ –∑–∞–∫–∞–∑—ã –ø—Ä–∏—à–ª–∏ —Å —Å–∞–π—Ç–∞
        window.addEventListener('storage', function(e) {
            if (e.key === 'youpechka_orders') {
                mockOrders = JSON.parse(e.newValue) || [];
                renderOrders();
            }
            if (e.key === 'youpechka_menu') {
                menuItems = JSON.parse(e.newValue) || [];
                renderTable();
            }
        });

        function initAdmin() {
            if (checkAuth()) {
                lucide.createIcons();
                loadData();
                renderTable();
                renderOrders();
                switchTab('orders');
            }
        }

        document.addEventListener('DOMContentLoaded', initAdmin);


        // --- TABS LOGIC ---
        function switchTab(tab) {
            document.getElementById('view-menu').classList.toggle('hidden', tab !== 'menu');
            document.getElementById('view-settings').classList.toggle('hidden', tab !== 'settings');
            document.getElementById('view-orders').classList.toggle('hidden', tab !== 'orders');
            
            const activeClass = 'whitespace-nowrap flex-1 md:flex-none flex items-center px-4 py-3 bg-orange-600 rounded-xl font-medium text-white transition-colors shadow-sm';
            const inactiveClass = 'whitespace-nowrap flex-1 md:flex-none flex items-center px-4 py-3 text-stone-400 hover:bg-stone-200 hover:text-stone-800 rounded-xl font-medium transition-colors';

            document.getElementById('tab-menu').className = tab === 'menu' ? activeClass : inactiveClass;
            document.getElementById('tab-settings').className = tab === 'settings' ? activeClass : inactiveClass;
            document.getElementById('tab-orders').className = tab === 'orders' ? activeClass : inactiveClass;
        }


        // --- ORDERS LOGIC ---
        function renderOrders() {
            const container = document.getElementById('orders-container');
            const badge = document.getElementById('orders-badge');
            
            // –°—á–∏—Ç–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ (–Ω–æ–≤—ã–µ –∏ –≥–æ—Ç–æ–≤—è—â–∏–µ—Å—è) –∑–∞–∫–∞–∑—ã –¥–ª—è –±–µ–π–¥–∂–∏–∫–∞
            const activeOrders = mockOrders.filter(o => o.status === 'new' || o.status === 'cooking').length;
            if (activeOrders > 0) {
                badge.textContent = activeOrders;
                badge.classList.remove('hidden');
            } else {
                badge.classList.add('hidden');
            }

            container.innerHTML = '';

            if (mockOrders.length === 0) {
                container.innerHTML = `
                    <div class="col-span-full text-center py-16 bg-white rounded-3xl border border-stone-200 shadow-sm">
                        <i data-lucide="inbox" class="w-16 h-16 text-stone-200 mx-auto mb-4"></i>
                        <h3 class="text-xl font-bold text-stone-400">–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–∫–∞–∑–æ–≤</h3>
                        <p class="text-sm text-stone-400 mt-2">–ö–æ–≥–¥–∞ –∫–ª–∏–µ–Ω—Ç –æ—Ñ–æ—Ä–º–∏—Ç –∑–∞–∫–∞–∑ –Ω–∞ —Å–∞–π—Ç–µ, –æ–Ω –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å.</p>
                    </div>`;
                lucide.createIcons();
                return;
            }

            const statusConfig = {
                'new': { color: 'bg-red-500', text: '–ù–æ–≤—ã–π –∑–∞–∫–∞–∑' },
                'cooking': { color: 'bg-yellow-500', text: '–ì–æ—Ç–æ–≤–∏—Ç—Å—è' },
                'done': { color: 'bg-green-500', text: '–í—ã–¥–∞–Ω' },
                'canceled': { color: 'bg-stone-300 text-stone-600', text: '–û—Ç–º–µ–Ω–µ–Ω' }
            };

            mockOrders.forEach(order => {
                const conf = statusConfig[order.status] || statusConfig['new'];
                
                let itemsHtml = order.items.map(i => `
                    <div class="flex justify-between text-sm mb-2 border-b border-stone-200/50 pb-1 last:border-0">
                        <span class="text-stone-700"><span class="font-bold text-stone-900">${i.qty} x</span> ${i.name}</span>
                        <span class="font-medium text-stone-900">${i.price * i.qty} ‚ÇΩ</span>
                    </div>
                `).join('');

                const isInactive = order.status === 'done' || order.status === 'canceled';

                const card = document.createElement('div');
                card.className = `bg-white rounded-3xl p-6 shadow-sm border border-stone-200 flex flex-col transition-opacity ${isInactive ? 'opacity-60 grayscale-[30%]' : ''}`;
                card.innerHTML = `
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <h3 class="font-black text-xl text-stone-900">–ó–∞–∫–∞–∑ #${order.id}</h3>
                            <p class="text-xs font-medium text-stone-400">${order.date}</p>
                        </div>
                        <span class="${conf.color} text-[10px] uppercase tracking-wider font-bold px-3 py-1.5 rounded-full shadow-sm">${conf.text}</span>
                    </div>
                    
                    <div class="bg-stone-50 p-5 rounded-2xl mb-4 flex-grow border border-stone-100">
                        <div class="mb-4 pb-4 border-b border-stone-200">
                            <div class="font-bold flex items-center mb-1 text-stone-800"><i data-lucide="user" class="w-4 h-4 mr-2 text-stone-400"></i>${order.name}</div>
                            <div class="text-stone-600 flex items-center text-sm font-medium"><i data-lucide="phone" class="w-4 h-4 mr-2 text-stone-400"></i><a href="tel:${order.phone}" class="hover:text-blue-500">${order.phone}</a></div>
                        </div>
                        <div class="mb-2">
                            <p class="text-[10px] font-bold text-stone-400 uppercase tracking-widest mb-3">–°–æ—Å—Ç–∞–≤ –∑–∞–∫–∞–∑–∞</p>
                            ${itemsHtml}
                        </div>
                        <div class="flex justify-between items-center mt-4 pt-4 border-t border-stone-200">
                            <span class="font-bold text-stone-400 uppercase text-xs tracking-wider">–ò—Ç–æ–≥–æ</span>
                            <span class="font-black text-2xl text-orange-600">${order.total} ‚ÇΩ</span>
                        </div>
                    </div>

                    <div class="flex gap-2 mt-auto">
                        ${order.status === 'new' ? `<button onclick="changeOrderStatus('${order.id}', 'cooking')" class="flex-1 bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-3 rounded-xl transition-colors text-sm shadow-sm">–ù–∞—á–∞—Ç—å –≥–æ—Ç–æ–≤–∏—Ç—å</button>` : ''}
                        ${order.status === 'cooking' ? `<button onclick="changeOrderStatus('${order.id}', 'done')" class="flex-1 bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-xl transition-colors text-sm shadow-sm">–í—ã–¥–∞—Ç—å –∫–ª–∏–µ–Ω—Ç—É</button>` : ''}
                        ${!isInactive ? `<button onclick="changeOrderStatus('${order.id}', 'canceled')" class="px-4 bg-stone-100 hover:bg-red-100 text-stone-500 hover:text-red-500 font-bold py-3 rounded-xl transition-colors text-sm" title="–û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑"><i data-lucide="x" class="w-5 h-5 mx-auto"></i></button>` : ''}
                    </div>
                `;
                container.appendChild(card);
            });
            lucide.createIcons();
        }

        function changeOrderStatus(id, newStatus) {
            const order = mockOrders.find(o => o.id === id);
            if (order) {
                order.status = newStatus;
                localStorage.setItem('youpechka_orders', JSON.stringify(mockOrders)); // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Ç–∞—Ç—É—Å
                renderOrders();
            }
        }


        // --- MENU LOGIC ---
        function renderTable() {
            const tbody = document.getElementById('menu-table');
            if (menuItems.length === 0) {
                tbody.innerHTML = `<tr><td colSpan="5" class="p-8 text-center text-stone-400">–ú–µ–Ω—é –ø—É—Å—Ç–æ. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—É—é –ø–æ–∑–∏—Ü–∏—é!</td></tr>`;
                return;
            }
            
            tbody.innerHTML = menuItems.map(item => {
                const defaultImg = 'https://images.unsplash.com/photo-1513104890138-7c749659a591?w=500';
                const imgUrl = item.img || defaultImg;
                
                return `
                <tr class="hover:bg-stone-50 transition-colors">
                    <td class="p-4">
                        <img src="${imgUrl}" onerror="this.src='${defaultImg}'" class="w-12 h-12 md:w-16 md:h-16 object-cover rounded-xl border border-stone-200 shadow-sm">
                    </td>
                    <td class="p-4">
                        <div class="font-bold text-stone-900">${item.name}</div>
                        ${item.size ? `<div class="text-xs text-stone-500 mt-1">${item.size}</div>` : ''}
                    </td>
                    <td class="p-4 text-xs md:text-sm text-stone-500">
                        <span class="bg-stone-100 px-2 py-1 rounded-md font-medium border border-stone-200/50">${item.category}</span>
                    </td>
                    <td class="p-4 font-black text-orange-600 whitespace-nowrap text-lg">${item.price} ‚ÇΩ</td>
                    <td class="p-4 text-right">
                        <div class="flex justify-end space-x-1 md:space-x-2">
                            <button onclick="openForm(${item.id})" class="text-blue-500 p-2 md:p-3 hover:bg-blue-50 rounded-xl transition-colors" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"><i data-lucide="edit" class="w-4 h-4 md:w-5 md:h-5"></i></button>
                            <button onclick="deleteItem(${item.id})" class="text-red-500 p-2 md:p-3 hover:bg-red-50 rounded-xl transition-colors" title="–£–¥–∞–ª–∏—Ç—å"><i data-lucide="trash-2" class="w-4 h-4 md:w-5 md:h-5"></i></button>
                        </div>
                    </td>
                </tr>
            `}).join('');
            lucide.createIcons();
        }

        function openForm(id = null) {
            document.getElementById('item-form').reset();
            if (id) {
                const item = menuItems.find(i => i.id === id);
                document.getElementById('item-id').value = item.id;
                document.getElementById('item-name').value = item.name;
                document.getElementById('item-category').value = item.category;
                document.getElementById('item-price').value = item.price;
                document.getElementById('item-size').value = item.size || '';
                document.getElementById('item-tags').value = (item.tags || []).join(', ');
                document.getElementById('item-desc').value = item.desc || '';
                document.getElementById('item-img').value = item.img || '';
                document.getElementById('modal-title').textContent = '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∑–∏—Ü–∏—é';
            } else {
                document.getElementById('item-id').value = '';
                document.getElementById('modal-title').textContent = '–î–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é';
            }
            document.getElementById('form-modal').classList.remove('hidden');
        }

        function closeForm() { 
            document.getElementById('form-modal').classList.add('hidden'); 
        }

        function saveItem(e) {
            e.preventDefault();
            const idVal = document.getElementById('item-id').value;
            const tagsInput = document.getElementById('item-tags').value;
            
            const newItem = {
                id: idVal ? parseInt(idVal) : Date.now(),
                name: document.getElementById('item-name').value,
                category: document.getElementById('item-category').value,
                price: parseInt(document.getElementById('item-price').value),
                size: document.getElementById('item-size').value,
                tags: tagsInput.split(',').map(t => t.trim()).filter(t => t !== ''),
                desc: document.getElementById('item-desc').value,
                img: document.getElementById('item-img').value
            };

            if (idVal) {
                const idx = menuItems.findIndex(i => i.id === newItem.id);
                menuItems[idx] = newItem;
            } else {
                menuItems.push(newItem);
            }
            
            localStorage.setItem('youpechka_menu', JSON.stringify(menuItems)); // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ø–∞–º—è—Ç—å!
            renderTable();
            closeForm();
        }

        function deleteItem(id) {
            if(confirm('–¢–æ—á–Ω–æ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –ø–æ–∑–∏—Ü–∏—é –∏–∑ –º–µ–Ω—é?')) {
                menuItems = menuItems.filter(i => i.id !== id);
                localStorage.setItem('youpechka_menu', JSON.stringify(menuItems)); // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ø–∞–º—è—Ç—å!
                renderTable();
            }
        }

        function saveSettings(e) {
            e.preventDefault();
            const token = document.getElementById('bot-token').value;
            const chatId = document.getElementById('chat-id').value;
            localStorage.setItem('youpechka_settings', JSON.stringify({ botToken: token, chatId: chatId }));
            alert(`–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!`);
        }
    </script>
</body>
</html>
